1.数据库端已经彻底可以,
2.虚拟机端需要加功能，毕工要求的功能需要加上。还有文件如果删除不干净，还需要，写个判断另起一个文件夹。这里还要加强处理
3.主服务目前不用动，以后可以考虑和毕工的合并优化
4.袁的都不用动
5.失败还原程序
6.优化虚拟机端。1，文件关闭情况，每次启动退出命令前，先关闭虚拟机上的所有东西。，2，不问路，直接请求
7.目前已经是最新版本在虚拟机上，下一版本的话，还要对fdfs,和mysql做高可用，以后再说
8.改良了删除的小bug
9.高可用以后再说，



12.31
目前已经完成了3389的工作，并且已经通过了4台测试。
接下来主要是部署，让他变成后台运行。


fdfs cluster
MYsql主从

1.10
目前2，3,4,7,8,9.10,11,12都是最新的多对多端。并且这些已经通过了测试，跑通了。
注意在现在的报送体系是，如果报完，拿走的话，就没有了。就不能再拿了，只能拿一次。这点一定要注意。
这些是专门用来报送的。 给我自己用

1.10
目前1，5,6号机器是加时间戳版本。在文件报送的时候，会在名字上加个时间。时间戳版本，是在多对多的基础上改写出来的。
也就是说这三台，可以给bim去用。因为名字加了时间戳。给王倩用

时间戳版本的实现，代码逻辑是以点.为分隔符的，所以必须有能够显示后缀名，在机器设置上必须显示文件名才行。
但是我经过测试发现其实没有问题，与系统怎么设置无关,event.src_path获取的是绝对路径，和你是怎么设置无关。



逻辑上，都得换上加时间戳的版本，这样才能解决重名的问题，否则从源头开始重复文件，你是无法上报的，你报都报不了，就别提收了，因为一个文件夹里面
不能有重复文件，这个要回头敲定了最终文件名之后再改吧，你知道这一点就行了 。目前就别动了。
还有最后一次打包功能，暂时先这样把，目前也先别动了。



目前发现了一个bug,就是如果文件夹不关，虚拟机可以正常处理，但是如果是excel不关，就不行，我初步排查的结果是，因为没有管理员
的权限，你是用worker打开的，所以你调用系统关就不行。我用john也不行，这就没办法了，只能。
问题是我的程序时系统权限啊。但是还是不行，那就没办法了，只能让用户自己每次退出的时候清理干净系统。





4个报送人员也要用时间戳版本，否则，你报送重名文件，肯定会出问题。
收的3个人，不用加时间版本，因为合并就加了时间。




第一台虚拟机有问题啊，报送竟然失败了。



1，时间戳版本但是用不了，报送不好使，没有合并端
5，6，8，9时间戳版本给4人用
12，时间戳版本给王倩用
5, 6报送功能是好用的。给施工员2是没问题的   目前已经配置了报送文件，里面数据填好了，直接报就行，头也加入 了身份标识
8，9报送功能是好用的，给施工员1 报送没问题  目前已经配置了报送文件，里面数据填好了，直接报就行，头也加入 了身份标识
施工员1,2自动报送公司也是OK的。


2,7非时间戳版本 无合并端


合并功能
4 一公司、已部署  最新
3,工程部二  已部署  最新
10工程部一  已部署  最新
11 备用  已部署  最新
这4个不是时间戳版本虚拟机，就是多对多版本，配合合并端



目前公司需要应对的是2个同时合并，1前1后同时合，目前这是没问题的。已测试
接下来测试项目部，需要应对的合并情况。都是同样的端，和公司一致，无非是考虑多个一起合并的问题。多个合并已经测试通过


看一下nginx硬盘情况。目前还够用，只用了16%


目前合并遇到的问题已经彻底排查出来，主要是临时文件的问题，报送四台不用动，只需要动3台合并的就行，等
张浩弄完2007之后，我再测试，部署那3台，因为合并的话，可能会出现其他隐藏文件。


目前我现在的端可以和2007完美融合，接下来只需要部署就行。


3.6汇报展示最新情况。
文件报送是通的，但是合并的数据有问题，在这个问题上，建议，合并端
以后每次展示前，一定要先重启一下，这样保证不会出现问题。怕之前有残留文件
所以有可能出现残留文件的问题影响，所以下次一定要注意。




5，6，8，9 欧克 工区 只是报送，有虚拟机端，没有任何问题
10  3.项目部   报送加合并，已经测试通过
4  公司   报送加合并，已经测试通过



date :3.11
虚拟机改变，家了发的功能
垃圾改成回收站

4，5 改变后的端
6，7 改变后的端

其他端均为以前的老端


经过测试目前功能都已经实现了。但是有一点，数据库里面没有发的字段，所有目前的用户，
往数据里面写的时候回报错，其他没有问题。



3.13
增加了自动切换壁纸的功能，并打开相应的文件夹。这个功能目前还没有写完，下周再弄吧。
暂时取消虚拟机更换壁纸的功能，把代码注释号就行。

3.16

目前带有发的功能的虚拟机端，就能满足目前功能，暂时不需要改动。
直接部署就好，把这个端分发到12台虚拟机上。就可以满足，

需要增加报业主问价夹。但是功能可以先不实现。目前根据一个按钮一个岗位一个虚拟机来看，目前
再两个虚拟机里面增加报业主功能就可以了

也就是说这些个问价夹，所有这些，可以再周四统一调度，统一部署，不需要再今天部署。周四统一放就行。
等模板到位以后，可以一起配置这些就行。暂时不动



3.17

发全部，回收站全部，业主方2个，虚拟机端全部，王倩的图标3个，模板文件根据不同业务，每个里面都会有。照片3个，视频3个，都是问价夹，
王倩的图，只需要三个虚拟机



明天注释一下虚拟机的壁纸代码  已完成


3.17
目前工作，这是目前手头的工作
1.测试bim中心压力、  不着急，可以分配给王倩


2.报业主，需要报业主，报业主的模块功能，数据库设计，这是一个模块，孙总说这个模块要自己写，要配一个
管理数据库，要知道哪一个是谁报的业主，要做汇总留存，当然，一人一库里面也是会有报业主的数据。所以这里要规划这写。需要静下心来设计。
已经设计完毕。这里也不用着写。先心里有个框架就行。


3,部署分配虚拟机，等虚拟机的东西都到位之后，再说。先不急，模板虚拟机都到位再说，周四再弄就可以。


4，搭建hadoop,这个也需要做
5,推进股票

3.18
1，孙总说到时候，需要用到ftp来传入数据到hadoop,直接从ftp通道来上传，也就是pc端上的ftp,
但是目前我也还不知道怎么写，主要是思考，想着，这个事情就可以。


3，规划设计报业主功能，这里我觉的也不用写，先规划出思路，因为这里还要设计云调度的问题，而且现在的报业主也是空的，
目前找两个虚拟机放上报业主的文件夹就行
报业主设计，文件拖入之后，直接被我的一人一库管理起来，然后走redis,到了redis之后，业主方的端直接拉到地址之后
看怎么处理，
业主端上也放一个数据库，记录报业主的消息，
数据库设计
这个可以和execl表的设计一样就行。但是要明确一点，就是报业主，是项目部发起的行为，和部门无关
但是字段设计上可以多，但是不能少，所以就保持和excel一样就行。


2，该虚拟机分配，目前按照业务分配虚拟机。因为不是云调度的版本，云调度才是用岗位分配。
所以我需要增加一个业务字段的接受，然后根据业务字段，去分配虚拟机。这样不行，这样又变成云调度了，
看来这里目前是改不了，暂时分配，一个岗位干一个业务吧。
工区的虚拟机还是按照岗位分配。这里就不需要业务字段了
如何项目部和公司区分。利用不同的岗位名字来区分，公司的岗位前面加一公司。
已经交代完毕。


3.19

1,练习蒋公，关于bim翻模人员，我要去沟通，并且请过来。或者让他们简直去做，关于bim翻模。
这个事情孙总交给我了，接下来需要我去做。  正在沟通中，已经加了其中两个人的微信，一个许，一个王
只有这两个人可以，蒋工说，其他人都不行，只有这两个人有这个能力。  进行中


2，张学先继续跟进bim工作。 已完成，但是明天要请示领导蒙层的事情。

3，搭建CDH  正在进行中

4，关于过度页面 BIM的风格问题。 已经完成


3.19
1修改数据库名，因为如果岗位来回变的话，会造成一人一库找不到的问题。所以这里得代码需要改写。
关于这里先不要动，周一请示领导，是一人一库，还是一岗一库，因为权限变了，岗位也会跟着变，所以
建议会影响找库，这里要由领导来定。我先不要改。和王倩规划，然后存到黑板里面。

2配置虚拟机，和张敏联合调试。已成功，

3db端show接口，有个地方需要改，就是关于，前端传参数，多了一个看发的地方。这个点别忘了，发是看下发的。 已告知张敏。

4王倩写的端必须和我发生互动才行，否则，没有办法通知我关闭虚拟机，这个事情需要落地。 已经告知。

5合并端的部署问题，如果有需要，就要重新规划部署，目前虚拟机上没有考虑合并的问题。
合并端的部署，需要一个文件名：“1”的原始空excel文件，这个别忘了。
注意正式的demo文件再bim项目里。

6 目前12个虚拟机都是最新的发端，并切配置了模板，按岗位分配虚拟机。。

7 发现一个很严重的问题，就是网络通信，虚拟机功能不好使，其实已经不是代码的问题了，代码已经很成熟了，
看日志发现是网络通信有问题，。这里要注意一下。

8，新的一批虚拟机还是有问题

9,下周合并端的部署，现在我就部署把，因为我听说下周有人来看，调试的时候。联合合并端一起联调。


10,虚拟机端，报发逻辑上 ，有点问题，发的时候给下级库里面写了一次，
下级库再退出的时候，又存了一次，也就是逻辑上有冗余，这个下周再给改吧，想着这个事情，就行


11，公司往项目部发的时候注意一个问题，都是在收里面，可能会自动合并。


12，安全管理员1 公司合并端， 安全员1  项目部1合并端  安全员2  项目部2合并端   已经部署完毕，其他没有  工区1,2,3,4报送。

13，winservice  如果停止了，就会造成一个问题，就是虚拟机端开始运行了，但是退出的时候，毕工没有请求我，原因就是
winservice 停用了。



3.23
1,目前主要工作在虚拟机上，必须先有虚拟机，没有虚拟机的话，没有办法部署工程部
有了工程部，部署虚拟机，放模板，就可以了，等张浩的虚拟机。等待

2 让部长也能看虚拟机 欧克
3.现在的工区只能报一个人，以后要改成报三个部门的，但是这里暂时先这样吧，就先不改了，改变成本也是比较高的，
这次演示报表合并就拿一个部门得了，暂不考虑更多。这个先记着吧，改变成本很高。这个问题记着点，到时和云调度一起更改。
以后再说
4，对接打印功能交给王倩了，让王倩弄。欧克
5，明天要更改mysql的字符集，写个脚本，用pymysql

3.24
一边推进虚拟机，一边推进股票，目前主要就这两件事情
虚拟机我先做，让张学先看着。慢慢就教给他了。



虚拟机改成云调度版本，
结合数据库
结合中台调度端
数据库里的表也要改，改成一人一库，一库多个业务表。
先伪代码，开始。



